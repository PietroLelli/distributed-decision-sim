incarnation: protelis

environment:
  - type: simulation.DistributedDecisionEnvironment

network-model:
  type: FullyConnected

_resources: &resources
  ["Resource0", "Resource1", "Resource2"]

_prodUnitsProgram: &prodUnitsProgram
  - time-distribution: 5
    type: Event
    actions:
      - type: simulation.action.RunOneStepAction
        parameters: 1

  - time-distribution: 1
    type: Event
    actions:
      - type: simulation.action.OrderGeneratorAction
        parameters: [*resources]

  - time-distribution: 8
    type: Event
    actions:
      - type: simulation.action.AssignStepToProdUnitAction

  - time-distribution: 5
    type: Event
    actions:
      - type: simulation.action.AddResourceToWarehouseAction
        parameters: [*resources]

_prodUnits: &prodUnits
  - type: Point
    parameters: [ 0, 0 ]
    properties:
        - type: simulation.model.ProdUnit
          parameters: [["A"]]
    contents:
      - molecule: prodUnit
    programs:
      - *prodUnitsProgram

  - type: Point
    parameters: [ 0, 0 ]
    properties:
      - type: simulation.model.ProdUnit
        parameters: [ [ "B" ] ]
    contents:
      - molecule: prodUnit
    programs:
      - *prodUnitsProgram

  - type: Point
    parameters: [ 0, 0 ]
    properties:
      - type: simulation.model.ProdUnit
        parameters: [ [ "C" ] ]
    contents:
      - molecule: prodUnit
    programs:
      - *prodUnitsProgram

deployments:
  *prodUnits

#terminate:
#  - type: AfterTime
#    parameters: 30